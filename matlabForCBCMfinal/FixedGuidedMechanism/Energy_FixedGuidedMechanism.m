function y=Energy_FixedGuidedMechanism(x)
global t1 t2 t3 L1 L2 L3
%t1=1.2e-3;
%L1=30e-3/5;
% t1=t1/L1;
% t2=t1;
% t3=t1;
% t4=t1;
% t5=t1;
% t6=t1;
k331=(t1/L1)^2/12;
k332=(t2/L2)^2/12;
k333=(t3/L3)^2/12;
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
[len,gro]=size(x);
for i=1:gro
    y123(i)=0.5*k331*x(3,i)^2+0.5*[x(4,i) x(6,i)]*[12 -6;-6 4]*[x(4,i);x(6,i)]+0.5*x(3,i)^2*[x(4,i) x(6,i)]*[1/700 -1/1400;-1/1400 11/6300]*[x(4,i);x(6,i)]+0.5*x(3,i)^3*[x(4,i) x(6,i)]*[-1/31500 1/63000;1/63000 -1/13500]*[x(4,i);x(6,i)]+...
        0.5*k332*x(9,i)^2+0.5*[x(10,i) x(12,i)]*[12 -6;-6 4]*[x(10,i);x(12,i)]+0.5*x(9,i)^2*[x(10,i) x(12,i)]*[1/700 -1/1400;-1/1400 11/6300]*[x(10,i);x(12,i)]+0.5*x(9,i)^3*[x(10,i) x(12,i)]*[-1/31500 1/63000;1/63000 -1/13500]*[x(10,i);x(12,i)]+...
        0.5*k333*x(15,i)^2+0.5*[x(16,i) x(18,i)]*[12 -6;-6 4]*[x(16,i);x(18,i)]+0.5*x(15,i)^2*[x(16,i) x(18,i)]*[1/700 -1/1400;-1/1400 11/6300]*[x(16,i);x(18,i)]+0.5*x(15,i)^3*[x(16,i) x(18,i)]*[-1/31500 1/63000;1/63000 -1/13500]*[x(16,i);x(18,i)];
end

% for i=1:gro
%     y1234(i)=0.5*k331*x(3,i)^2+1/2*x(3,i)*([x(4,i) x(6,i)]*[0.6 -0.05;-0.05 1/15]*[x(4,i);x(6,i)])+0.5*[x(4,i) x(6,i)]*[12 -6;-6 4]*[x(4,i);x(6,i)]+0.5*x(3,i)^3*[x(4,i) x(6,i)]*[-1/126000 1/252000;1/252000 -1/54000 ]*[x(4,i);x(6,i)]+...
%              0.5*k332*x(9,i)^2*0.5*x(9,i)*[x(10,i) x(12,i)]*[0.6 -0.05;-0.05 1/15]*[x(10,i);x(12,i)]+0.5*[x(10,i) x(12,i)]*[12 -6;-6 4]*[x(10,i);x(12,i)]+0.5*x(9,i)^3*[x(10,i) x(12,i)]*[-1/126000 1/252000;1/252000 -1/54000]*[x(10,i);x(12,i)]+...
%              0.5*k333*x(15,i)^2+0.5*x(15,i)*[x(16,i) x(18,i)]*[0.6 -0.05;-0.05 1/15]*[x(16,i);x(18,i)]+0.5*[x(16,i) x(18,i)]*[12 -6;-6 4]*[x(16,i);x(18,i)]+0.5*x(15,i)^3*[x(16,i) x(18,i)]*[-1/126000 1/252000;1/252000 -1/54000]*[x(16,i);x(18,i)];
% end
y=[y123];